# SilentMemo設計メモ

## ChatGPT会話からの重要ポイント

### コンセプト
- 親が子に宛てた手紙を、未来の特定タイミングで解錠できるアプリ
- 「消える手紙（kieru-tegami）」の技術を転用・拡張
- 忙しさと距離（単身赴任など）で気持ちを"今"届けにくい課題を解決

### MVP（Day 1）の重要ルール
1. **MVPは「openAt」だけで出す**（年齢/イベント/チェーンは後回し）
2. 既存の「儚さ（消える）」の美学は残す（開封後24h or 開封可能から30日）
3. "SilentMemo化（音声/感情検知）"は第2形態

### 成功指標
- 送信者が3分以内に1通作成できる
- 週1通（"1行レター"）が成立する導線
- 受信者が迷わず開封できる

### 転用できる既存機能（kieru-tegami）
- 共有リンク（受信者がURLで開く）
- 1回開封制御
- Bot除外（LINE等のプレビューで開封扱いにしない）
- 開封前取り消し
- 送信者プレビュー
- 管理画面（送った一覧/状態）
- 「読んだよ」スタンプ
- 定期削除タスク（cron）
- 3つの書き方モード（AI下書き/感情増幅/自分で書く）

### 追加が必要な差分（本質）
- openAt（開封可能日時）：その日時まで"開封できない"
- unlockPolicy（解錠条件）：誕生日・年齢・イベント（MVPは日時だけで十分）
- proof（任意）：改ざん検知の証跡（ハッシュ）

### エッジケース
- 12.5 取り消しと開封の競合：open時に isCanceled を必ず確認
- 12.6 期限削除後のアクセス：EXPIRED画面（説明が必要。「消えた」ことが価値）

### 技術スタック
- React + Express + tRPC + Drizzle + MySQL/TiDB
- 音声：Web Audio API + Whisper API
- 暗号化：Web Crypto API（AES-GCM-256）
- ハッシュ：SHA-256
