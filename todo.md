# 未来便（Mirai-bin）TODO

## Day 1: 骨組み実装

### データベース・初期設定
- [x] データベーススキーマ作成（letters、templatesテーブル）
- [x] テンプレート初期データ投入（10歳へ、進学の朝に、最初に恋をした日へ）

### バックエンドAPI
- [x] tRPCルーター実装（letter、template、ai）
- [x] 音声文字起こしAPI統合（Whisper API）
- [x] AI下書き生成API統合（Manus LLM）
- [x] S3ストレージ統合（音声・暗号文保存）

### フロントエンドユーティリティ
- [x] 音声録音ユーティリティ（audio.ts）
- [x] 暗号化ユーティリティ（crypto.ts）- AES-GCM-256
- [x] ハッシュ生成ユーティリティ（proof.ts）- SHA-256

### フロントエンドUI
- [x] ホームページ（テンプレート選択）
- [x] 手紙作成ページ（CreateLetter.tsx）
  - [x] テンプレート選択ステップ
  - [x] 録音ステップ（90秒制限）
  - [x] 文字起こし表示ステップ
  - [x] AI下書き生成ステップ
  - [x] 編集ステップ
  - [x] 暗号化・保存ステップ
- [x] 完了画面（統合済み）
- [x] マイレターページ（MyLetters.tsx）

### テスト
- [x] Vitestテスト作成
- [x] エンドツーエンドフロー確認


## Day 2: 開封日時・共有リンク機能

### データベース更新
- [x] shareToken フィールド追加（共有リンク用）
- [x] 開封関連フィールド追加（isUnlocked, unlockedAt, viewCount）

### バックエンドAPI
- [x] 共有リンク生成API
- [x] 共有リンクからの手紙取得API（Bot除外ロジック付き）
- [x] 開封日時チェックロジック
- [x] 開封処理API

### フロントエンドUI
- [x] 手紙作成時の開封日時設定UI
- [x] 共有ページ（/share/:token）
- [x] 開封前画面（カウントダウン表示）
- [x] 開封後画面（手紙表示）
- [x] Bot検出・除外ロジック

### テスト
- [x] 共有リンク機能テスト
- [x] 開封日時ロジックテスト


## Day 3: 通知機能・テンプレート拡充

### テンプレート拡充（親から子への気持ちの承継）
- [x] 小学校卒業の日に
- [x] 中学校入学の日に
- [x] 中学校卒業の日に
- [x] 高校入学の日に
- [x] 高校卒業の日に
- [x] 大学入学の日に
- [x] 成人の日に（18歳）
- [x] 就職の日に
- [x] 結婚する日に
- [x] 子どもが生まれた日に
- [x] 既存テンプレートの見直し・改善
- [x] 辛いときに読んで（特別な日）
- [x] いつか読んでほしい手紙（特別な日）

### 通知機能
- [x] メール送信機能
- [x] LINE共有機能
- [x] 共有ボタンUI改善

### テスト
- [x] テンプレート追加テスト
- [x] 通知機能テスト
