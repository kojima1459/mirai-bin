# 未来便（Mirai-bin）TODO

## Day 1: 骨組み実装

### データベース・初期設定
- [x] データベーススキーマ作成（letters、templatesテーブル）
- [x] テンプレート初期データ投入（10歳へ、進学の朝に、最初に恋をした日へ）

### バックエンドAPI
- [x] tRPCルーター実装（letter、template、ai）
- [x] 音声文字起こしAPI統合（Whisper API）
- [x] AI下書き生成API統合（Manus LLM）
- [x] S3ストレージ統合（音声・暗号文保存）

### フロントエンドユーティリティ
- [x] 音声録音ユーティリティ（audio.ts）
- [x] 暗号化ユーティリティ（crypto.ts）- AES-GCM-256
- [x] ハッシュ生成ユーティリティ（proof.ts）- SHA-256

### フロントエンドUI
- [x] ホームページ（テンプレート選択）
- [x] 手紙作成ページ（CreateLetter.tsx）
  - [x] テンプレート選択ステップ
  - [x] 録音ステップ（90秒制限）
  - [x] 文字起こし表示ステップ
  - [x] AI下書き生成ステップ
  - [x] 編集ステップ
  - [x] 暗号化・保存ステップ
- [x] 完了画面（統合済み）
- [x] マイレターページ（MyLetters.tsx）

### テスト
- [x] Vitestテスト作成
- [x] エンドツーエンドフロー確認


## Day 2: 開封日時・共有リンク機能

### データベース更新
- [x] shareToken フィールド追加（共有リンク用）
- [x] 開封関連フィールド追加（isUnlocked, unlockedAt, viewCount）

### バックエンドAPI
- [x] 共有リンク生成API
- [x] 共有リンクからの手紙取得API（Bot除外ロジック付き）
- [x] 開封日時チェックロジック
- [x] 開封処理API

### フロントエンドUI
- [x] 手紙作成時の開封日時設定UI
- [x] 共有ページ（/share/:token）
- [x] 開封前画面（カウントダウン表示）
- [x] 開封後画面（手紙表示）
- [x] Bot検出・除外ロジック

### テスト
- [x] 共有リンク機能テスト
- [x] 開封日時ロジックテスト
